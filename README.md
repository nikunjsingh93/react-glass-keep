# Glass Keep

A sleek, Keep-style notes app with Markdown, checklists, images, tag chips, color themes, dark mode, drag-and-drop reordering, import/export, auth, and a glassy UI ‚Äî built with Vite + React and a tiny Express + SQLite API. PWA-ready with offline caching.

---
**Web App Screenshots**

<img width="1200" height="862" alt="Screenshot 2025-08-13 at 4 21 49‚ÄØPM" src="https://github.com/user-attachments/assets/cc03dd25-072b-4766-b788-971aeda609f3" />

<img width="1202" height="864" alt="Screenshot 2025-08-13 at 6 37 31‚ÄØPM" src="https://github.com/user-attachments/assets/4048b268-56c6-4828-9c6c-d039b97f7b85" />

<img width="1203" height="863" alt="Screenshot 2025-08-13 at 5 55 29‚ÄØPM" src="https://github.com/user-attachments/assets/a15110b8-0bb4-4387-be3a-3ac4eaeae121" />

**Mobile Screenshots**

<img width="381" height="718" alt="Screenshot 2025-08-13 at 5 56 17‚ÄØPM" src="https://github.com/user-attachments/assets/288c8a25-c787-4fc3-aa7d-ee49f8811669" />

<img width="380" height="719" alt="Screenshot 2025-08-13 at 6 31 54‚ÄØPM" src="https://github.com/user-attachments/assets/908b1902-d6e6-4d71-9958-1421273eb9d4" />


## ‚ú® Features

* **Auth & Multi-user**

  * Register, Login (username + password), Sign out
  * **Secret recovery key** download + **Sign in with Secret Key**
  * Each user sees **only their notes**
* **Collaboration (real-time)** ‚úÖ NEW

  * Real-time collaboration for checklists ‚Äî multiple people can add/tick items together and see updates instantly.
  * Collaboration on notes ‚Äî co-edit Markdown notes and watch changes sync live across collaborators.  
* **Admin Panel**

  * Visit: `http://localhost:5173/#/admin` (dev) or `http://localhost:8080/#/admin` (Docker/prod)
  * View **all users** with: Name, Email/Username, **Is Admin**, **Notes count**, **Storage used**, Created at
  * **Delete user** (also deletes their notes; protected against deleting the last admin)
* **Notes**

  * **Text notes** with Markdown (H1/H2/H3, bold, italic, strike, links, blockquote, inline/fenced code)
  * **Checklists** (add items, toggle done, inline edit)
  * **Smart Enter** continues lists / exits on empty line
  * **Formatting toolbar** in editor (composer + modal edit mode)
  * **Links open in new tab** from view mode
* **Images**

  * Attach multiple images (client-side compression)
  * Thumbs in grid, larger in modal
  * **Fullscreen viewer** with next/prev + **download image**
* **Organization & Layout**

  * **Pin / Unpin**; ‚ÄúPinned / Others‚Äù sections
  * **Tags as chips** (comma input ‚Üí chips; quick add/remove)
  * **Tag sidebar/drawer** with list of all tags + counts
  * Quick filters: **Notes (All)** and **All Images**
  * Per-note **color themes**
  * **Search** across title, Markdown text, tags, checklist items, image names
  * **Drag to reorder** within each section
  * Grid cards show truncated body with **‚Ä¶** and tag chips with **‚Ä¶** when overflowing
* **Modal**

  * Glassy blurred backdrop; **sticky header**
  * **View / Edit** toggle button
  * Pin, more (‚ãÆ) menu (**Download .md**), Close
  * Footer: tags chip editor, color palette, image add, **Delete (confirm dialog)**, **Save**
  * Click anywhere in body (view mode) to switch to edit
  * Dense list rendering in view mode (minimal spacing)
* **PWA**

  * Installable on desktop & mobile
  * Offline caching of the built app shell
* **Bulk actions (multi-select)** ‚úÖ NEW

  * Select multiple notes at once to Download, Pin/Unpin, Delete, or Change Color.
* **Data**

  * **Export all** notes (JSON) and **Import** (merges; keeps existing notes)
  * Per-note **Download .md**
  * Import from Google Keep (Google Takeout) ‚Äî pick multiple .json files in one go to bring your Keep notes over. ‚úÖ NEW
  * Backend: **Express API + SQLite** (`better-sqlite3`)
* **UI/Theme**

  * Tailwind (v4) look & feel with glassmorphism
  * Dark/Light mode with persistence
  * Responsive header: hamburger + logo; ‚ÄúGlass Keep‚Äù title hidden on small screens

---

## üß∞ Requirements

* **Node.js 18+** and npm
* (Optional) **Docker** & **Docker Compose**
* SQLite is embedded (no external DB needed)

---

## üì¶ Project Structure

```
.
‚îú‚îÄ public/                # PWA icons, manifest generated by Vite plugin
‚îú‚îÄ src/                   # React app (App.jsx, etc.)
‚îú‚îÄ server/                # Express + SQLite API (index.js, data.sqlite on runtime)
‚îú‚îÄ index.html
‚îú‚îÄ vite.config.js
‚îú‚îÄ package.json
‚îî‚îÄ README.md
```

---

## üõ† Setup (Development)

### 1) Install dependencies

```bash
npm install
# (Optional) only If you don't have these dev/runtime deps yet:
npm install -D concurrently nodemon
npm install express better-sqlite3 cors jsonwebtoken bcryptjs
```

### 2) Run (web + API)

**POSIX/mac/Linux:**
```bash
ADMIN_EMAILS="your-admin-username" npm run dev
```

**Windows (PowerShell):**
```powershell
setx ADMIN_EMAILS "your-admin-username"
npm run dev
```

- Frontend (Vite): http://localhost:5173  
- **Admin Panel (dev):** http://localhost:5173/#/admin  
- API (Express): http://localhost:8080  
  *(Vite dev server proxies `/api` ‚Üí `http://localhost:8080`.)*

**Promote an existing user to admin (optional):**
```sql
-- Run against server/data.sqlite
UPDATE users SET is_admin=1 WHERE email='your-admin-username';
```

---

## üê≥ Docker (single image: API + built frontend)

### Dockerfile

Your Dockerfile builds the frontend, bundles the API, and runs the Express server that serves both the API and the built UI.

### Build & Run

```bash
# Get the latest image from Docker Hub
docker pull nikunjsingh/glass-keep:latest

# Create data dir
mkdir -p ~/.glass-keep

# (optional) stop/remove any old container
docker rm -f glass-keep 2>/dev/null || true

# Run
docker run -d \
  --name glass-keep \
  --restart unless-stopped \
  -p 8080:8080 \
  -e NODE_ENV=production \
  -e API_PORT=8080 \
  -e JWT_SECRET="replace-with-a-long-random-string" \
  -e DB_FILE="/app/data/notes.db" \
  -e ADMIN_EMAILS="your-admin-username" \
  -v ~/.glass-keep:/app/data \
  nikunjsingh/glass-keep:latest

```

- App & API: http://localhost:8080  
- **Admin Panel (Docker/prod):** http://localhost:8080/#/admin  
  *(Make sure `ADMIN_EMAILS` matches the username exactly when creating the admin account)*

### docker-compose.yml

```yaml
version: "3.8"
services:
  app:
    image: nikunjsingh/glass-keep:latest
    container_name: glass-keep
    restart: unless-stopped
    environment:
      NODE_ENV: production
      API_PORT: "8080"
      JWT_SECRET: replace-with-a-long-random-string
      DB_FILE: /app/data/notes.db
      ADMIN_EMAILS: your-admin-username  # <‚Äî change this to your admin user
    ports:
      - "8080:8080"
    volumes:
      - /home/YOURUSER/.glass-keep:/app/data   # <‚Äî change this to your actual home path username
```

Run:

```bash
mkdir -p /home/YOURUSER/.glass-keep
docker compose up -d
```

> **Persistent data:** notes DB lives in the mounted `./data` folder on your host.


---

## üß≠ Using the Admin Panel

- **Where**
  - Dev: http://localhost:5173/#/admin
  - Docker/Prod: http://localhost:8080/#/admin
- **Who can access**: Users with `is_admin = 1`.
  - Auto-promote by setting `ADMIN_EMAILS="your-admin-username"` before starting the server/container, **or**
  - Run a one-off SQL update:
    ```sql
    UPDATE users SET is_admin=1 WHERE email='your-admin-username';
    ```
- **What you can do**
  - View all users with: **Is Admin**, **Notes count**, **Storage used**, **Created at**
  - **Delete** a user (also removes their notes; cannot delete the last admin)

> The admin view is intentionally not in the main header menu. Navigate to the route directly.

---

## üß≠ Usage Guide

* **Create a note**

  * Choose **Note / Checklist** in the composer toggle.
  * Enter a *Title* and content.
  * Add **tags** (comma-separated) ‚Äî they become chips.
  * Choose a **color**, attach **images**, then click **Add Note**.

* **Markdown editing**

  * Use the **Formatting** button (Aa) in the composer or modal edit mode:

    * H1/H2/H3, **bold**, *italic*, ~~strike~~, `inline code`, `fenced code`, quote, lists, link
  * **Smart Enter** continues lists or exits on empty line.

* **Open / Edit**

  * Click a card to open the modal.
  * Modal header has **View / Edit** toggle, **Pin**, **‚ãÆ (Download .md)**, and **Close**.
  * Click anywhere in the body (view mode) to switch to edit mode.

* **Images**

  * Click a modal image to open **Fullscreen Viewer** (download, next/prev).
  * Images are compressed client-side on upload.

* **Pin & Reorder**

  * Use the pin icon on a card or modal header.
  * Drag cards to reorder within **Pinned** or **Others**.

* **Tags & Filters**

  * Open the **hamburger menu** ‚Üí sidebar lists all tags + counts.
  * Quick filters: **Notes (All)**, **All Images**.

* **Search**

  * Searches title, Markdown text, tags, checklist items, and image names.

* **Export / Import**

  * Header **‚ãÆ** ‚Üí **Export** to JSON (backup/sharing).
  * **Import** JSON merges with existing notes (keeps existing).

* **Secret Key**

  * Header **‚ãÆ** ‚Üí **Download secret key (.txt)**.
  * On login screen, choose **Forgot username/password? ‚Üí Sign in with Secret Key**.

---

## üîê Security Notes

* Treat your **Secret Key** like a password. Anyone with it can sign in as you.
* Change `JWT_SECRET` in production to a long, random string.
* Serve over HTTPS in production for PWA and security best practices.

---

## üß™ Troubleshooting

* **Dev proxy error (`ECONNREFUSED` to `/api`)**

  * Ensure the API is running on `:8080` (`npm run dev` starts both).
* **Docker runs but CSS looks wrong**

  * Rebuild after Tailwind config changes: `docker compose build --no-cache`.
  * Ensure the app is built (`npm run build`) before running the Node server image.
* **PWA ‚ÄúInstall‚Äù doesn‚Äôt appear**

  * Use the built preview (`npm run preview`) or serve production build over HTTPS.
  * Check DevTools ‚Üí Application ‚Üí Manifest & Service Worker for errors.

---


## üìù License

MIT
