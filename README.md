# Glass Keep

A sleek, Keep-style notes app with Markdown, checklists, images, tag chips, color themes, dark mode, drag-and-drop reordering, import/export, auth, and a glassy UI — built with Vite + React and a tiny Express + SQLite API. PWA-ready with offline caching.

---

## ✨ Features

* **Auth & Multi-user**

  * Register, Login (username + password), Sign out
  * **Secret recovery key** download + **Sign in with Secret Key**
  * Each user sees **only their notes**
* **Notes**

  * **Text notes** with Markdown (H1/H2/H3, bold, italic, strike, links, blockquote, inline/fenced code)
  * **Checklists** (add items, toggle done, inline edit)
  * **Smart Enter** continues lists / exits on empty line
  * **Formatting toolbar** in editor (composer + modal edit mode)
  * **Links open in new tab** from view mode
* **Images**

  * Attach multiple images (client-side compression)
  * Thumbs in grid, larger in modal
  * **Fullscreen viewer** with next/prev + **download image**
* **Organization & Layout**

  * **Pin / Unpin**; “Pinned / Others” sections
  * **Tags as chips** (comma input → chips; quick add/remove)
  * **Tag sidebar/drawer** with list of all tags + counts
  * Quick filters: **Notes (All)** and **All Images**
  * Per-note **color themes**
  * **Search** across title, Markdown text, tags, checklist items, image names
  * **Drag to reorder** within each section
  * Grid cards show truncated body with **…** and tag chips with **…** when overflowing
* **Modal**

  * Glassy blurred backdrop; **sticky header**
  * **View / Edit** toggle button
  * Pin, more (⋮) menu (**Download .md**), Close
  * Footer: tags chip editor, color palette, image add, **Delete (confirm dialog)**, **Save**
  * Click anywhere in body (view mode) to switch to edit
  * Dense list rendering in view mode (minimal spacing)
* **PWA**

  * Installable on desktop & mobile
  * Offline caching of the built app shell
* **Data**

  * **Export all** notes (JSON) and **Import** (merges; keeps existing notes)
  * Per-note **Download .md**
  * Backend: **Express API + SQLite** (`better-sqlite3`)
* **UI/Theme**

  * Tailwind (v4) look & feel with glassmorphism
  * Dark/Light mode with persistence
  * Responsive header: hamburger + logo; “Glass Keep” title hidden on small screens

---

## 🧰 Requirements

* **Node.js 18+** and npm
* (Optional) **Docker** & **Docker Compose**
* SQLite is embedded (no external DB needed)

---

## 📦 Project Structure

```
.
├─ public/                # PWA icons, manifest generated by Vite plugin
├─ src/                   # React app (App.jsx, etc.)
├─ server/                # Express + SQLite API (index.js, data.sqlite on runtime)
├─ index.html
├─ vite.config.js
├─ package.json
└─ README.md
```

---

## 🛠 Setup (Development)

### 1) Install dependencies

```bash
npm install
# If you don't have these dev/runtime deps yet:
npm install -D concurrently nodemon
npm install express better-sqlite3 cors jsonwebtoken bcryptjs
```

### 2) Run the app (web + API)

```bash
npm run dev
```

* Frontend (Vite): [http://localhost:5173](http://localhost:5173)
* API (Express): [http://localhost:8080](http://localhost:8080)
  (The Vite dev server proxies `/api` → `http://localhost:8080`.)

> **Tip:** If you prefer two terminals, you can run `vite` in one and `nodemon server/index.js` in another.

### 3) Environment variables (optional in dev)

* `JWT_SECRET` — secret for signing JWTs (defaults to a dev string)
* `PORT` / `API_PORT` — Express port (defaults to **8080**)
* `SQLITE_FILE` — path to DB file (defaults to `server/data.sqlite`)

---

## 🐳 Docker (single image: API + built frontend)

### Dockerfile

Your Dockerfile builds the frontend, bundles the API, and runs the Express server that serves both the API and the built UI.

### Build & Run

```bash
# Get the latest image from Docker Hub
docker pull nikunjsingh/glass-keep:latest

# Stop/remove any old container (ignore errors if it doesn't exist)
docker rm -f glass-keep 2>/dev/null || true

# Run it
docker run --name glass-keep \
  -p 8080:8080 \
  -e NODE_ENV=production \
  -e PORT=8080 \
  -e API_PORT=8080 \
  -e SQLITE_FILE=/app/data/notes.db \
  -e JWT_SECRET="replace-with-a-long-random-string" \
  -v "$(pwd)/data:/app/data" \
  --restart unless-stopped \
  -d nikunjsingh/glass-keep:latest

```

Visit: [http://localhost:8080](http://localhost:8080)

### docker-compose.yml

```yaml
version: "3.8"
services:
  app:
    image: nikunjsingh/glass-keep:latest
    container_name: glass-keep
    environment:
      NODE_ENV: production
      PORT: 8080          # server/index.js reads PORT
      API_PORT: 8080      # harmless extra (some scripts reference it)
      SQLITE_FILE: /app/data/notes.db
      JWT_SECRET: replace-with-a-long-random-string
    ports:
      - "8080:8080"
    volumes:
      - ./data:/app/data
    restart: unless-stopped
```

Run:

```bash
docker compose up --build -d
docker compose logs -f
```

> **Persistent data:** notes DB lives in the mounted `./data` folder on your host.

---

## 🧭 Usage Guide

* **Create a note**

  * Choose **Note / Checklist** in the composer toggle.
  * Enter a *Title* and content.
  * Add **tags** (comma-separated) — they become chips.
  * Choose a **color**, attach **images**, then click **Add Note**.

* **Markdown editing**

  * Use the **Formatting** button (Aa) in the composer or modal edit mode:

    * H1/H2/H3, **bold**, *italic*, ~~strike~~, `inline code`, `fenced code`, quote, lists, link
  * **Smart Enter** continues lists or exits on empty line.

* **Open / Edit**

  * Click a card to open the modal.
  * Modal header has **View / Edit** toggle, **Pin**, **⋮ (Download .md)**, and **Close**.
  * Click anywhere in the body (view mode) to switch to edit mode.

* **Images**

  * Click a modal image to open **Fullscreen Viewer** (download, next/prev).
  * Images are compressed client-side on upload.

* **Pin & Reorder**

  * Use the pin icon on a card or modal header.
  * Drag cards to reorder within **Pinned** or **Others**.

* **Tags & Filters**

  * Open the **hamburger menu** → sidebar lists all tags + counts.
  * Quick filters: **Notes (All)**, **All Images**.

* **Search**

  * Searches title, Markdown text, tags, checklist items, and image names.

* **Export / Import**

  * Header **⋮** → **Export** to JSON (backup/sharing).
  * **Import** JSON merges with existing notes (keeps existing).

* **Secret Key**

  * Header **⋮** → **Download secret key (.txt)**.
  * On login screen, choose **Forgot username/password? → Sign in with Secret Key**.

---

## 🔐 Security Notes

* Treat your **Secret Key** like a password. Anyone with it can sign in as you.
* Change `JWT_SECRET` in production to a long, random string.
* Serve over HTTPS in production for PWA and security best practices.

---

## 🧪 Troubleshooting

* **Dev proxy error (`ECONNREFUSED` to `/api`)**

  * Ensure the API is running on `:8080` (`npm run dev` starts both).
* **Docker runs but CSS looks wrong**

  * Rebuild after Tailwind config changes: `docker compose build --no-cache`.
  * Ensure the app is built (`npm run build`) before running the Node server image.
* **PWA “Install” doesn’t appear**

  * Use the built preview (`npm run preview`) or serve production build over HTTPS.
  * Check DevTools → Application → Manifest & Service Worker for errors.

---


## 📝 License

MIT
